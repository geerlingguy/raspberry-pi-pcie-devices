<!DOCTYPE html>
<html lang="en-US">

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,maximum-scale=2">
    <script async="" src="//analytics.midwesternmac.com/tracker.js" id="fathom-script"></script>
    <link rel="stylesheet" type="text/css" media="screen" href="/assets/css/style.css?v=">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Broadcom MegaRAID 9460-16i storage controller | Raspberry Pi PCIe Database</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="Broadcom MegaRAID 9460-16i storage controller" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="This card currently requires a few minor driver modifications to work on both 32-bit and 64-bit ARM on Raspberry Pi OS. The 64-bit version also hits a bug in the Pi 64-bit kernel: writeq() on 64-bit OS does not issue PCIe cycle, switching to two writel() works." />
<meta property="og:description" content="This card currently requires a few minor driver modifications to work on both 32-bit and 64-bit ARM on Raspberry Pi OS. The 64-bit version also hits a bug in the Pi 64-bit kernel: writeq() on 64-bit OS does not issue PCIe cycle, switching to two writel() works." />
<link rel="canonical" href="https://pipci.jeffgeerling.com//cards_storage/broadcom-megaraid-9460-16i.html" />
<meta property="og:url" content="https://pipci.jeffgeerling.com//cards_storage/broadcom-megaraid-9460-16i.html" />
<meta property="og:site_name" content="Raspberry Pi PCIe Database" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-08-31T16:34:03+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Broadcom MegaRAID 9460-16i storage controller" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-08-31T16:34:03+00:00","datePublished":"2024-08-31T16:34:03+00:00","description":"This card currently requires a few minor driver modifications to work on both 32-bit and 64-bit ARM on Raspberry Pi OS. The 64-bit version also hits a bug in the Pi 64-bit kernel: writeq() on 64-bit OS does not issue PCIe cycle, switching to two writel() works.","headline":"Broadcom MegaRAID 9460-16i storage controller","mainEntityOfPage":{"@type":"WebPage","@id":"https://pipci.jeffgeerling.com//cards_storage/broadcom-megaraid-9460-16i.html"},"url":"https://pipci.jeffgeerling.com//cards_storage/broadcom-megaraid-9460-16i.html"}</script>
<!-- End Jekyll SEO tag -->

  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="sponsor_banner" href="https://github.com/sponsors/geerlingguy">Sponsor <i class="fa-solid fa-heart"></i></a>
          <a id="forkme_banner" href="https://github.com/geerlingguy/raspberry-pi-pcie-devices">View on GitHub <i class="fa-brands fa-github"></i></a>

          <h2 id="project_title"><a href="/">Raspberry Pi PCIe Database</a></h2>
          <h2 id="project_tagline">Raspberry Pi PCI Express device compatibility database</h2>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">

        <h1 id="card_title">Broadcom MegaRAID 9460-16i storage controller</h1>

        <div class="card_picture">
          
            <a href="/images/storage-broadcom-megaraid-9460-16i.jpg"><img src="/images/storage-broadcom-megaraid-9460-16i.jpg" alt="Broadcom MegaRAID 9460-16i storage controller"></a>
          
        </div>

        <table class="card_details_table">
          <thead>
            <tr>
              <th>CM4 Functionality</th>
              <th>Pi 5 Functionality</th>
              <th>Driver Required?</th>
              <th>More Info</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Full</td>
              <td>Untested</td>
              <td>Yes</td>
              <td><a href="https://github.com/geerlingguy/raspberry-pi-pcie-devices/issues/72">GitHub Issue</a></td>
            </tr>
          </tbody>
        </table>

        <div class="card_videos">
          <h3>Videos Related to this Card</h2>
            
              <ul>
                
                  <li><a href="https://www.youtube.com/watch?v=Zpfq8ZC2hyI">Hardware RAID for the fastest Raspberry Pi CM4 NAS!</a></a></li>
                
                  <li><a href="https://www.youtube.com/watch?v=jOU-NDDyyuY">Raspberry Pi does SATA, SAS, and PCIe NVMe—at the same time!</a></a></li>
                
              </ul>
            
        </div>

        <div class="card_content">
          <h3>Description and Notes</h3>
          <p>This card currently requires a few minor driver modifications to work on both 32-bit and 64-bit ARM on Raspberry Pi OS. The 64-bit version also hits a bug in the Pi 64-bit kernel: <a href="https://github.com/raspberrypi/linux/issues/4158">writeq() on 64-bit OS does not issue PCIe cycle, switching to two writel() works</a>.</p>

<p>Driver compilation also requires setting <code class="language-plaintext highlighter-rouge">CONFIG_IRQ_POLL=y</code> in your kernel <code class="language-plaintext highlighter-rouge">.config</code> and recompiling the Pi OS kernel.</p>

<p>Once the card is up and running, you can use StorCLI to manage volumes through the storage controller.</p>

<p>For example, you can view all the drives attached to a particular backplane using <code class="language-plaintext highlighter-rouge">storcli64 /c0 show</code>.</p>

<p>To create a RAID 5 volume with four SATA drives in slots 1-4 in a storage backplane, run:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>storcli64 /c0 add vd r5 name=SATAR5 drives=97:0-3 pdcache=default AWB ra direct Strip=64
</code></pre></div></div>

<p>I was able to get sustained 400 MB/sec read and write performance using four Kingston SSDs inside an SFF-TA-1005-compliant reference backplane connected to the card via the U.3 (SFF-TA-1001) spec.</p>

<p>That is equavelent to about 3.35 Gbps, which is right at the limit of what the Pi’s 1x PCI Express Gen 2.0 lane can handle (and is in line with what I’ve gotten out of multi-gigabit network cards when testing them to their limits).</p>

        </div>

        <div class="card_buy_link">
          <h3>Buy this Card</h3>
          <p>If you'd like to purchase this card, it helps me out if you use the following product link:<br>
          <a href="https://amzn.to/3arF4O4">Broadcom MegaRAID 9460-16i storage controller</a></p>
        </div>

      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">The Raspberry Pi PCIe Database project is maintained by <a href="https://github.com/geerlingguy">geerlingguy</a></p>
      </footer>
    </div>

    
      <!-- Fathom - simple website analytics - https://github.com/usefathom/fathom -->
      <script>
      (function(f, a, t, h, o, m){
        a[h]=a[h]||function(){
          (a[h].q=a[h].q||[]).push(arguments)
        };
        o=f.createElement('script'),
        m=f.getElementsByTagName('script')[0];
        o.async=1; o.src=t; o.id='fathom-script';
        m.parentNode.insertBefore(o,m)
      })(document, window, '//analytics.midwesternmac.com/tracker.js', 'fathom');
      fathom('set', 'siteId', 'JVIIB');
      fathom('trackPageview');
      </script>
      <!-- / Fathom -->
    
  </body>
</html>
