<!DOCTYPE html>
<html lang="en-US">

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,maximum-scale=2">
    <script async="" src="//analytics.midwesternmac.com/tracker.js" id="fathom-script"></script>
    <link rel="stylesheet" type="text/css" media="screen" href="/assets/css/style.css?v=">

<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Time Card - Open Compute Project | Raspberry Pi PCIe Devices</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Time Card - Open Compute Project" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Time Card is the heart of the Open Time Server project. It is an entirely open source board design that can be used with the OCP PTP driver in the Linux kernel to run a computer as a grandmaster clock source with hardware timestamping." />
<meta property="og:description" content="Time Card is the heart of the Open Time Server project. It is an entirely open source board design that can be used with the OCP PTP driver in the Linux kernel to run a computer as a grandmaster clock source with hardware timestamping." />
<link rel="canonical" href="https://pipci.jeffgeerling.com//cards_other/time-card.html" />
<meta property="og:url" content="https://pipci.jeffgeerling.com//cards_other/time-card.html" />
<meta property="og:site_name" content="Raspberry Pi PCIe Devices" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-03-25T18:22:17+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Time Card - Open Compute Project" />
<script type="application/ld+json">
{"datePublished":"2022-03-25T18:22:17+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://pipci.jeffgeerling.com//cards_other/time-card.html"},"description":"Time Card is the heart of the Open Time Server project. It is an entirely open source board design that can be used with the OCP PTP driver in the Linux kernel to run a computer as a grandmaster clock source with hardware timestamping.","url":"https://pipci.jeffgeerling.com//cards_other/time-card.html","@type":"BlogPosting","headline":"Time Card - Open Compute Project","dateModified":"2022-03-25T18:22:17+00:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="sponsor_banner" href="https://github.com/sponsors/geerlingguy">Sponsor</a>
          <a id="forkme_banner" href="https://github.com/geerlingguy/raspberry-pi-pcie-devices">View on GitHub</a>

          <h2 id="project_title"><a href="/">Raspberry Pi PCIe Devices</a></h2>
          <h2 id="project_tagline">Raspberry Pi PCI Express device compatibility database</h2>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">

        <h1 id="card_title">Time Card - Open Compute Project</h1>

        <div class="card_picture">
          
            <a href="/images/other-time-card.jpg"><img src="/images/other-time-card.jpg" alt="Time Card - Open Compute Project"></a>
          
        </div>

        <table class="card_details_table">
          <thead>
            <tr>
              <th>Functionality</th>
              <th>Driver Required?</th>
              <th>More Info</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Full</td>
              <td>Yes</td>
              <td><a href="https://github.com/geerlingguy/raspberry-pi-pcie-devices/issues/199">GitHub Issue</a></td>
            </tr>
          </tbody>
        </table>

        <div class="card_videos">
          <h3>Videos Related to this Card</h2>
            
              <ul>
                
                  <li><a href="https://www.youtube.com/watch?v=tU0xC1ynaT8">The most accurate Raspberry Pi atomic clock IN THE WORLD!</a></a></li>
                
              </ul>
            
        </div>

        <div class="card_content">
          <h3>Description and Notes</h3>
          <p>Time Card is the heart of the Open Time Server project. It is an entirely open source board design that can be used with the OCP PTP driver in the Linux kernel to run a computer as a grandmaster clock source with hardware timestamping.</p>

<p>The card includes a GNSS receiver, a rubidium oscillator, and an FPGA to translate the timing signals on the PCI Express bus.</p>

<p>The card works with the Raspberry Pi Compute Module 4 IO Board using a riser or adapter (the card is x4, while the IO Board’s slot is x1), but you currently need to compile a custom Pi kernel to use it, with kernel 5.11 or later (I tested with kernel 5.14), and with the following option enabled in <code class="language-plaintext highlighter-rouge">menuconfig</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Device Drivers
  &gt; PTP clock support
    &gt; OpenCompute TimeCard as PTP clock
</code></pre></div></div>

<p>To use the Pi as a PTP hardware timestamping grandmaster clock, you need to have a NIC with hardware timestamping support.</p>

<p>The NIC built into the CM4 (Broadcom BCM54210PE PHY) has PTP support, but the <a href="https://github.com/raspberrypi/linux/issues/4151">IEEE1588-2008 support is currently not enabled in Pi OS itself</a>, so you can’t currently use the Pi as a PTP time source with hardware timestamping.</p>

<p>It remains to be seen whether the CM4 could be used with a PCIe switch and an external NIC with hardware PTP timestamping support in tandem with the Time Card.</p>

        </div>

        <div class="card_buy_link">
          <h3>Buy this Card</h3>
          <p>If you'd like to purchase this card, it helps me out if you use the following product link:<br>
          <a href="https://github.com/opencomputeproject/Time-Appliance-Project/tree/master/Time-Card">Time Card - Open Compute Project</a></p>
        </div>

      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">The Raspberry Pi PCIe Devices project is maintained by <a href="https://github.com/geerlingguy">geerlingguy</a></p>
      </footer>
    </div>

    
      <!-- Fathom - simple website analytics - https://github.com/usefathom/fathom -->
      <script>
      (function(f, a, t, h, o, m){
        a[h]=a[h]||function(){
          (a[h].q=a[h].q||[]).push(arguments)
        };
        o=f.createElement('script'),
        m=f.getElementsByTagName('script')[0];
        o.async=1; o.src=t; o.id='fathom-script';
        m.parentNode.insertBefore(o,m)
      })(document, window, '//analytics.midwesternmac.com/tracker.js', 'fathom');
      fathom('set', 'siteId', 'JVIIB');
      fathom('trackPageview');
      </script>
      <!-- / Fathom -->
    
  </body>
</html>
